{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default async function searchImagesByQuery(query, page) {\n    const URL = 'https://pixabay.com/api/';\n    const API_KEY = '45506482-0746cd613ccb32219c9653431';\n  \n    try {\n      const response = await fetch(\n        `${URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n      );\n  \n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n  \n      const data = await response.json();\n      \n      if (data.hits.length === 0) {\n        throw new Error('No images found.');\n      }\n  \n      return data;\n    } catch (error) {\n      throw new Error(error.message);\n    }\n  }","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function createImages(data) {\n  const list = document.querySelector('.gallery-list');\n  const images = data.hits\n    .map(\n      hit => `\n        <div class=\"image-frame\">\n          <a href=\"${hit.largeImageURL}\">\n            <img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" />\n          </a>\n          <div class=\"text-wrapper\">\n            <div class=\"text-block\">\n              <h5>Likes</h5><p>${hit.likes}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Views</h5><p>${hit.views}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Comments</h5><p>${hit.comments}</p>\n            </div>\n            <div class=\"text-block\">\n              <h5>Downloads</h5><p>${hit.downloads}</p>\n            </div>\n          </div>\n        </div>`\n    )\n    .join('');\n  \n  list.insertAdjacentHTML('beforeend', images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery-list');\n  list.innerHTML = '';\n}\n\nexport function initLightbox() {\n  lightbox = new SimpleLightbox('.gallery-list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  return lightbox;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport searchImagesByQuery from './js/pixabay-api.js';\nimport { createImages, clearImages, initLightbox } from './js/render-functions.js';\n\nconst form = document.querySelector('.gallery-form');\nconst input = document.querySelector('.input-for-gallery');\nconst loader = document.querySelector('.loader');\nconst galleryList = document.querySelector('.gallery-list');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet lightbox;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  clearImages();\n  currentPage = 1;\n  currentQuery = input.value.trim();\n\n  if (currentQuery === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    return;\n  }\n\n  fetchImages(currentQuery, currentPage);\n}\n\nfunction handleLoadMore() {\n  fetchImages(currentQuery, ++currentPage);\n}\n\nasync function fetchImages(query, page) {\n  try {\n    loader.classList.add('active');\n    const data = await searchImagesByQuery(query, page);\n\n    if (data.totalHits === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    createImages(data);\n\n    if (!lightbox) {\n      lightbox = initLightbox();\n    } else {\n      lightbox.refresh();\n    }\n\n    if (data.hits.length < 15 || page * 15 >= data.totalHits) {\n      loadMoreButton.classList.add('hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: 'No more images to load.',\n      });\n    } else {\n      loadMoreButton.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: `An error occurred: ${error.message}`,\n    });\n  } finally {\n    loader.classList.remove('active');\n  }\n}\n\nlightbox = initLightbox();"],"names":["searchImagesByQuery","query","page","URL","API_KEY","response","data","error","lightbox","createImages","list","images","hit","clearImages","initLightbox","SimpleLightbox","form","input","loader","loadMoreButton","currentPage","currentQuery","handleSubmit","handleLoadMore","event","iziToast","fetchImages"],"mappings":"6vBAAe,eAAeA,EAAoBC,EAAOC,EAAM,CAC3D,MAAMC,EAAM,2BACNC,EAAU,qCAEhB,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,GAAGF,CAAG,QAAQC,CAAO,MAAMH,CAAK,iEAAiEC,CAAI,cAC7G,EAEM,GAAI,CAACG,EAAS,GACZ,MAAM,IAAI,MAAM,SAASA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGpE,MAAMC,EAAO,MAAMD,EAAS,OAE5B,GAAIC,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,kBAAkB,EAGpC,OAAOA,CACR,OAAQC,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACL,CCpBA,IAAIC,EAEG,SAASC,EAAaH,EAAM,CACjC,MAAMI,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAASL,EAAK,KACjB,IACCM,GAAO;AAAA;AAAA,qBAEQA,EAAI,aAAa;AAAA,sCACAA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,iCAIvCA,EAAI,KAAK;AAAA;AAAA;AAAA,iCAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,oCAGNA,EAAI,QAAQ;AAAA;AAAA;AAAA,qCAGXA,EAAI,SAAS;AAAA;AAAA;AAAA,eAI7C,EACA,KAAK,EAAE,EAEVF,EAAK,mBAAmB,YAAaC,CAAM,EAC3CH,EAAS,QAAO,CAClB,CAEO,SAASK,GAAc,CAC5B,MAAMH,EAAO,SAAS,cAAc,eAAe,EACnDA,EAAK,UAAY,EACnB,CAEO,SAASI,GAAe,CAC7BN,OAAAA,EAAW,IAAIO,EAAe,kBAAmB,CAC/C,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAG,EACMP,CACT,CC3CA,MAAMQ,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAQ,SAAS,cAAc,oBAAoB,EACnDC,EAAS,SAAS,cAAc,SAAS,EAC3B,SAAS,cAAc,eAAe,EAC1D,MAAMC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EACdC,EAAe,GACfb,EAEJQ,EAAK,iBAAiB,SAAUM,CAAY,EAC5CH,EAAe,iBAAiB,QAASI,CAAc,EAEvD,SAASD,EAAaE,EAAO,CAM3B,GALAA,EAAM,eAAc,EACpBX,IACAO,EAAc,EACdC,EAAeJ,EAAM,MAAM,OAEvBI,IAAiB,GAAI,CACvBI,EAAS,MAAM,CACb,SAAU,WACV,QAAS,uBACf,CAAK,EACD,MACD,CAEDC,EAAYL,EAAcD,CAAW,CACvC,CAEA,SAASG,GAAiB,CACxBG,EAAYL,EAAc,EAAED,CAAW,CACzC,CAEA,eAAeM,EAAYzB,EAAOC,EAAM,CACtC,GAAI,CACFgB,EAAO,UAAU,IAAI,QAAQ,EAC7B,MAAMZ,EAAO,MAAMN,EAAoBC,EAAOC,CAAI,EAElD,GAAII,EAAK,YAAc,EAAG,CACxBmB,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0EACjB,CAAO,EACD,MACD,CAEDhB,EAAaH,CAAI,EAEZE,EAGHA,EAAS,QAAO,EAFhBA,EAAWM,EAAY,EAKrBR,EAAK,KAAK,OAAS,IAAMJ,EAAO,IAAMI,EAAK,WAC7Ca,EAAe,UAAU,IAAI,QAAQ,EACrCM,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,yBACjB,CAAO,GAEDN,EAAe,UAAU,OAAO,QAAQ,CAE3C,OAAQZ,EAAO,CACdkB,EAAS,MAAM,CACb,SAAU,WACV,QAAS,sBAAsBlB,EAAM,OAAO,EAClD,CAAK,CACL,QAAY,CACRW,EAAO,UAAU,OAAO,QAAQ,CACjC,CACH,CAEAV,EAAWM,EAAc"}