{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45506482-0746cd613ccb32219c9653431';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function searchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","export function renderImages(images) {\n    return images\n      .map(\n        ({ webformatURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"image-frame\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"image\" />\n          <div class=\"text-block\">\n            <p>Likes: ${likes}</p>\n            <p>Views: ${views}</p>\n            <p>Comments: ${comments}</p>\n            <p>Downloads: ${downloads}</p>\n          </div>\n        </div>`\n      )\n      .join('');\n  }\n  \n  export function renderMessage(message) {\n    return `<p class=\"message\">${message}</p>`;\n  }","import { searchImages } from './js/pixabay-api.js';\nimport { renderImages, renderMessage } from './js/render-functions.js';\n\nconst form = document.querySelector('.gallery-form');\nconst gallery = document.querySelector('.gallery-list');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\nlet currentPage = 1;\nlet currentQuery = '';\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('hidden');\n  currentPage = 1;\n  currentQuery = event.target.elements.query.value.trim();\n\n  if (currentQuery === '') return;\n\n  try {\n    const data = await searchImages(currentQuery, currentPage);\n    if (data.totalHits === 0) {\n      gallery.innerHTML = renderMessage('No images found.');\n      return;\n    }\n\n    gallery.innerHTML = renderImages(data.hits);\n    loadMoreBtn.classList.remove('hidden');\n  } catch (error) {\n    gallery.innerHTML = renderMessage('Something went wrong. Please try again.');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  loader.classList.add('active');\n\n  try {\n    const data = await searchImages(currentQuery, currentPage);\n    gallery.innerHTML += renderImages(data.hits);\n    loader.classList.remove('active');\n\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreBtn.classList.add('hidden');\n      gallery.innerHTML += renderMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    gallery.innerHTML += renderMessage('Something went wrong. Please try again.');\n    loader.classList.remove('active');\n  }\n});"],"names":["API_KEY","BASE_URL","searchImages","query","page","perPage","params","axios","error","renderImages","images","webformatURL","tags","likes","views","comments","downloads","renderMessage","message","form","gallery","loadMoreBtn","loader","currentPage","currentQuery","event","data"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAaC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAChE,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACd,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCvBO,SAASC,EAAaC,EAAQ,CACjC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,sBAEjDL,CAAY,UAAUC,CAAI;AAAA;AAAA,wBAExBC,CAAK;AAAA,wBACLC,CAAK;AAAA,2BACFC,CAAQ;AAAA,4BACPC,CAAS;AAAA;AAAA,eAG9B,EACA,KAAK,EAAE,CACX,CAEM,SAASC,EAAcC,EAAS,CACrC,MAAO,sBAAsBA,CAAO,MACxC,CChBA,MAAMC,EAAO,SAAS,cAAc,eAAe,EAC7CC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAc,EACdC,EAAe,GAEnBL,EAAK,iBAAiB,SAAU,MAAMM,GAAS,CAO7C,GANAA,EAAM,eAAc,EACpBL,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,QAAQ,EAClCE,EAAc,EACdC,EAAeC,EAAM,OAAO,SAAS,MAAM,MAAM,OAE7CD,IAAiB,GAErB,GAAI,CACF,MAAME,EAAO,MAAMxB,EAAasB,EAAcD,CAAW,EACzD,GAAIG,EAAK,YAAc,EAAG,CACxBN,EAAQ,UAAYH,EAAc,kBAAkB,EACpD,MACD,CAEDG,EAAQ,UAAYX,EAAaiB,EAAK,IAAI,EAC1CL,EAAY,UAAU,OAAO,QAAQ,CACtC,MAAe,CACdD,EAAQ,UAAYH,EAAc,yCAAyC,CAC5E,CACH,CAAC,EAEDI,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EACfD,EAAO,UAAU,IAAI,QAAQ,EAE7B,GAAI,CACF,MAAMI,EAAO,MAAMxB,EAAasB,EAAcD,CAAW,EACzDH,EAAQ,WAAaX,EAAaiB,EAAK,IAAI,EAC3CJ,EAAO,UAAU,OAAO,QAAQ,EAE5BI,EAAK,WAAaH,EAAc,KAClCF,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAQ,WAAaH,EAAc,4DAA4D,EAElG,MAAe,CACdG,EAAQ,WAAaH,EAAc,yCAAyC,EAC5EK,EAAO,UAAU,OAAO,QAAQ,CACjC,CACH,CAAC"}